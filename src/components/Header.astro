---
import { Image } from 'astro:assets';
import logoImage from '../assets/logo.png';
import Button from './Button.astro';
import Icon from './Icon.astro';

const navLinks = [
	{ href: '/services', text: 'Servicios' },
	{ href: '/about', text: 'Nosotros' },
	{ href: '/automation', text: 'Automatización' },
];
---

<header
	x-data="{ open: false }"
	@click.away="open = false"
	class="sticky top-0 z-50 w-full bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm"
>
	<div class="container mx-auto px-4">
		<div
			class="flex items-center justify-between whitespace-nowrap border-b border-solid border-accent-light dark:border-accent-dark py-4"
		>
			<a href="/" class="flex items-center gap-3 group">
				<Image
					src={logoImage}
					alt="Logo Wiñay Tech"
					width={32}
					height={32}
					class="size-8 text-primary-DEFAULT group-hover:scale-110 transition-transform"
				/>
				<h2 class="text-xl font-semibold leading-tight tracking-[-0.015em] font-brand">Wiñay Tech</h2>
			</a>

			<nav class="hidden items-center gap-8 md:flex">
				{navLinks.map((link) => (
					<a
						class="text-sm font-medium leading-normal text-text-light dark:text-text-dark hover:text-primary-DEFAULT transition-colors"
						href={link.href}
					>
						{link.text}
					</a>
				))}
				<Button href="/contact" size="sm">Contáctanos</Button>
			</nav>

			<div class="md:hidden">
				<button
					@click="open = !open"
					:aria-expanded="open.toString()"
					class="rounded-lg p-2 text-text-light dark:text-text-dark hover:bg-accent-light dark:hover:bg-accent-dark transition-colors"
					aria-label="Abrir menú"
				>
					<Icon name="menu" isMaterial x-show="!open" />
					<Icon name="close" isMaterial x-show="open" style="display: none;" />
				</button>
			</div>
		</div>
	</div>

	<div
		x-show="open"
		x-transition:enter="transition ease-out duration-200"
		x-transition:enter-start="opacity-0 scale-95"
		x-transition:enter-end="opacity-100 scale-100"
		x-transition:leave="transition ease-in duration-100"
		x-transition:leave-start="opacity-100 scale-100"
		x-transition:leave-end="opacity-0 scale-95"
		style="display: none;"
		class="md:hidden absolute w-full bg-background-light dark:bg-background-dark shadow-lg border-b border-accent-light dark:border-accent-dark"
	>
		<nav class="flex flex-col p-4 gap-4">
			{navLinks.map((link) => (
				<a
					class="text-base font-medium leading-normal hover:text-primary-DEFAULT transition-colors px-2 py-1"
					href={link.href}
				>
					{link.text}
				</a>
			))}
			<Button href="/contact" class="w-full mt-2">Contáctanos</Button>
		</nav>
	</div>
</header>