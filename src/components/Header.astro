---
// 1. Importaciones: Usamos Image para optimizar el logo
import { Image } from 'astro:assets'; 
import logoImage from '../assets/logo.png'; // <--- Confirma que la ruta es correcta

// 2. Definición de enlaces
const navLinks = [
  { href: "/services", text: "Servicios" },
  { href: "/about", text: "Nosotros" },
  { href: "/automation", text: "Automatización" }, 
];
---

<header 
  // Alpine.js para controlar el estado del menú móvil
  x-data="{ open: false }" 
  @click.away="open = false"
  // Estilos de cabecera: Sticky, fondo semi-transparente con blur
  class="sticky top-0 z-50 w-full bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm"
>
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between whitespace-nowrap border-b border-solid border-text-light/10 py-4">
      
      <a href="/" class="flex items-center gap-3 group">
        <Image 
          src={logoImage} 
          alt="Logo Wiñay Tech"
          width={32}
          height={32}
          class="size-8 text-primary group-hover:scale-110 transition-transform" 
        />
        
        <h2 class="text-xl font-semibold leading-tight tracking-[-0.015em] font-brand">
          Wiñay Tech
        </h2>
      </a>

      <nav class="hidden items-center gap-8 md:flex">
        {navLinks.map(link => (
          <a 
            class="text-sm font-medium leading-normal hover:text-primary transition-colors" 
            href={link.href}
          >
            {link.text}
          </a>
        ))}
        <a 
          href="/contact" 
          class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-background-light text-sm font-bold leading-normal tracking-[0.015em] hover:bg-opacity-90 transition-opacity"
        >
          <span class="truncate">Contáctanos</span>
        </a>
      </nav>

      <div class="md:hidden">
        <button 
          @click="open = !open" 
          class="rounded-lg p-2 text-text-light dark:text-text-dark hover:bg-gray-200 dark:hover:bg-contrast-accent transition-colors"
          aria-label="Abrir menú"
        >
          <span x-show="!open" class="material-symbols-outlined">menu</span>
          <span x-show="open" style="display: none;" class="material-symbols-outlined">close</span>
        </button>
      </div>
    </div>
  </div>

  <div 
    x-show="open" 
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 scale-95"
    x-transition:enter-end="opacity-100 scale-100"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-95"
    style="display: none;"
    class="md:hidden absolute w-full bg-background-light dark:bg-background-dark shadow-lg border-b border-text-light/10"
  >
    <nav class="flex flex-col p-4 gap-4">
      {navLinks.map(link => (
        <a 
          
          @click.prevent="open = false; window.location.href = $event.target.href"
          class="text-base font-medium leading-normal hover:text-primary transition-colors px-2 py-1" 
          href={link.href}
        >
          {link.text}
        </a>
      ))}
      <a 
        @click.prevent="open = false; window.location.href = $event.target.href"
        href="/contact" 
        class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-11 px-4 bg-primary text-background-light text-base font-bold leading-normal tracking-[0.015em] hover:bg-opacity-90 transition-opacity mt-2"
      >
        <span class="truncate">Contáctanos</span>
      </a>
    </nav>
  </div>
</header>