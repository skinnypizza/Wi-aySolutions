---
import { Image } from "astro:assets";
import logoImage from "../assets/logo.png";
import Button from "./Button.astro";
import Icon from "./Icon.astro";

// src/components/Header.astro
const navLinks = [
	{ href: "/services", text: "Nuestros Planes" },
	{ href: "/about", text: "Quiénes Somos" },
	{ href: "/contact", text: "Contacto" },
];
---

<header
	x-data="{ open: false }"
	@click.away="open = false"
	class="sticky top-0 z-50 w-full bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-lg border-b border-accent-light/10"
>
	<div class="container mx-auto px-4">
		<div class="flex items-center justify-between h-20">
			<!-- Logo -->
			<a href="/" class="flex items-center gap-2 group">
				<Image
					src={logoImage}
					alt="Logo Wiñay Tech"
					width={32}
					height={32}
					class="size-8 group-hover:scale-110 transition-transform duration-300"
				/>
				<h1
					class="text-2xl font-brand font-extrabold text-text-light dark:text-text-dark tracking-tighter"
				>
					Wiñay
				</h1>
			</a>

			<!-- Navegación de Escritorio -->
			<nav class="hidden md:flex items-center gap-6">
				{
					navLinks.map((link) => (
						<a
							href={link.href}
							class="font-body text-base text-text-light dark:text-text-dark hover:text-primary transition-colors duration-300"
						>
							{link.text}
						</a>
					))
				}
				<Button href="/contact" size="sm" variant="primary">
					Cotiza tu Proyecto
				</Button>
			</nav>

			<!-- Botón de Menú Móvil -->
			<div class="md:hidden">
				<button
					@click="open = !open"
					class="p-2 rounded-md text-text-light dark:text-text-dark focus:outline-none focus:ring-2 focus:ring-primary"
					aria-label="Abrir menú"
				>
					<Icon name="menu" class="h-6 w-6" x-show="!open" />
					<Icon name="close" class="h-6 w-6" x-show="open" />
				</button>
			</div>
		</div>
	</div>

	<!-- Panel de Menú Móvil -->
	<div
		x-show="open"
		x-transition:enter="transition ease-out duration-300"
		x-transition:enter-start="opacity-0 -translate-y-4"
		x-transition:enter-end="opacity-100 translate-y-0"
		x-transition:leave="transition ease-in duration-200"
		x-transition:leave-start="opacity-100 translate-y-0"
		x-transition:leave-end="opacity-0 -translate-y-4"
		class="md:hidden absolute top-full left-0 w-full bg-background-light dark:bg-background-dark shadow-xl border-t border-accent-light/10"
		style="display: none;"
	>
		<nav class="flex flex-col p-4">
			{
				navLinks.map((link) => (
					<a
						href={link.href}
						class="px-4 py-3 text-lg font-body rounded-md hover:bg-primary hover:text-text-dark transition-colors duration-200"
					>
						{link.text}
					</a>
				))
			}
			<div class="border-t border-accent-light/10 my-2"></div>
			<Button href="/contact" class="w-full" variant="primary">
				Cotiza tu Proyecto
			</Button>
		</nav>
	</div>
</header>
